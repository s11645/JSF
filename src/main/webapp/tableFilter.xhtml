<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
        xmlns:rich="http://richfaces.org/rich"
        xmlns:fn="http://java.sun.com/jsp/jstl/functions"
        xmlns:a4j="http://richfaces.org/a4j"
	template="/templates/default.xhtml">

	<ui:define name="content">
		<h:form id="filBean">
                    <rich:messages/>
                    <rich:dataTable value="#{patBean.all}" var="forFilter" id="tableFilter" filterVar="valueFilter">
                        <f:facet name="noData">
                            Nothing found
                        </f:facet>
                        <f:facet name="header">
                            <rich:columnGroup>
                                <rich:column rowspan="2">
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterFirst}" />
                                        <h:inputText id="firstFilter" value="#{filBean.filter.first}">
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                                <rich:column rowspan="2" >
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterSecond}" />
                                        <h:inputText id="secondFilter" value="#{filBean.filter.second}" style="width:90px">
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                                <rich:column rowspan="2" >
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterPesel}" />
                                        <h:inputText id="peselFilter" value="#{filBean.filter.pesel}" style="width:80px">
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                                <rich:column colspan="2" >
                                    <h:outputText value="#{msg.filterBirthday}" />
                                </rich:column>
                                <rich:column colspan="2" >
                                    <h:outputText value="#{msg.filterWeight}" />
                                </rich:column>
                                <rich:column colspan="2" >
                                    <h:outputText value="#{msg.filterHeight}" />
                                </rich:column>
                                <rich:column colspan="2" >
                                    <h:outputText value="#{msg.filterAdd}" />
                                </rich:column>
                                <rich:column breakRowBefore="true">
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterFrom}" />
                                        <h:inputText id="birthdayFromFilter" value="#{filBean.filter.birthdayFrom}" style="width:55px">
                                            <f:convertDateTime dateStyle="short" pattern="dd.MM.yyyy" />
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                                <rich:column>
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterTo}" />
                                        <h:inputText id="birthdayToFilter" value="#{filBean.filter.birthdayTo}" style="width:55px">
                                            <f:convertDateTime dateStyle="short" pattern="dd.MM.yyyy" />
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                                <rich:column>
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterFrom}" />
                                        <h:inputText id="weightFromFilter" value="#{filBean.filter.weightFrom}" style="width:40px">
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                                <rich:column>
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterTo}" />
                                        <h:inputText id="weightToFilter" value="#{filBean.filter.weightTo}" style="width:40px">
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                                <rich:column>
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterFrom}" />
                                        <h:inputText id="heightFromFilter" value="#{filBean.filter.heightFrom}" style="width:40px">
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                                <rich:column>
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterTo}" />
                                        <h:inputText id="heightToFilter" value="#{filBean.filter.heightTo}" style="width:40px">
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                                <rich:column>
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterFrom}" />
                                        <h:inputText id="addFromFilter" value="#{filBean.filter.addFrom}" style="width:55px">
                                            <f:convertDateTime dateStyle="short" pattern="dd.MM.yyyy" />
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                                <rich:column>
                                    <h:panelGroup>
                                        <h:outputText value="#{msg.filterTo}" />
                                        <h:inputText id="addToFilter" value="#{filBean.filter.addTo}" style="width:55px">
                                            <f:convertDateTime dateStyle="short" pattern="dd.MM.yyyy" />
                                            <a4j:ajax event="blur" render="tableFilter" execute="@this" />
                                        </h:inputText>
                                    </h:panelGroup>
                                </rich:column>
                            </rich:columnGroup>
                        </f:facet>
                        <rich:column
                            filterValue="#{filBean.filter.first}"
                            filterExpression="#{empty valueFilter or fn:startsWith(forFilter.first, valueFilter)}">
                            <h:outputText value="#{forFilter.first}"/>
                        </rich:column>
                        <rich:column
                            filterValue="#{filBean.filter.second}"
                            filterExpression="#{fn:containsIgnoreCase(forFilter.second, filBean.filter.second)}">
                            <h:outputText value="#{forFilter.second}"/>
                        </rich:column>
                        <rich:column
                            filterValue="#{filBean.filter.pesel}"
                            filterExpression="#{fn:containsIgnoreCase(forFilter.pesel, filBean.filter.second)}">
                            <h:outputText value="#{forFilter.pesel}"/>
                        </rich:column>
                        <rich:column
                            filter="#{filBean.birthdayFromFilter}">
                            <h:outputText value="#{forFilter.birthday}">
                                <f:convertDateTime dateStyle="short" pattern="dd.MM.yyyy"/>
                            </h:outputText>
                        </rich:column>
                        <rich:column
                            filter="#{filBean.birthdayToFilter}">
                            <h:outputText value=""/>
                        </rich:column>
                        <rich:column
                            filter="#{filBean.weightFromFilter}">
                            <h:outputText value="#{forFilter.weight}"/>
                        </rich:column>
                        <rich:column
                            filter="#{filBean.weightToFilter}">
                            <h:outputText value=""/>
                        </rich:column>
                        <rich:column
                            filter="#{filBean.heightFromFilter}">
                            <h:outputText value="#{forFilter.height}"/>
                        </rich:column>
                        <rich:column
                            filter="#{filBean.heightToFilter}">
                            <h:outputText value=""/>
                        </rich:column>
                        <rich:column
                            filter="#{filBean.addFromFilter}">
                            <h:outputText value="#{forFilter.add}">
                                <f:convertDateTime dateStyle="short" pattern="dd.MM.yyyy"/>
                            </h:outputText>
                        </rich:column>
                        <rich:column
                            filter="#{filBean.addToFilter}">
                            <h:outputText value=""/>
                        </rich:column>
                    </rich:dataTable>

                    <h:panelGrid>
			<h:messages id="messages" showDetail="#{true}" showSummary="#{false}" />
                    </h:panelGrid>

		</h:form>
	</ui:define>
</ui:composition>